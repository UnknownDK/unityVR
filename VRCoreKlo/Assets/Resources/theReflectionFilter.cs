using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System;

public class theReflectionFilter : MonoBehaviour
{
    private static float[] coefficients1 = new float[11] {
            0.867502900888504f,
            -0.0138393546815183f,
            -0.0120388043187822f,
            -0.00939505760028886f,
            -0.00625829877166053f,
            -0.00302426050732291f,
            -7.06517562570126E-05f,
            0.00229979532277727f,
            0.00389958005701170f,
            0.00467367480511701f,
            0.00469231509065060f,
    };

    private static float[][] coefficients = new float[24][];
        
    
    ReflectionFilter_revamp filterL;
    ReflectionFilter_revamp filterR;

    // Start is called before the first frame update
    void Start()
    {
        coefficients[0] = new float[11] { 0.8675029009f, -0.0138393547f, -0.0120388043f, -0.0093950576f, -0.0062582988f, -0.0030242605f, -0.0000706518f, 0.0022997953f, 0.0038995801f, 0.0046736748f, 0.0046923151f};
        coefficients[1] = new float[11] { 0.9521408257f, 0.0041871046f, 0.0039102846f, 0.0034797731f, 0.0029456352f, 0.0023664934f, 0.0018003920f, 0.0012963404f, 0.0008880273f, 0.0005907026f, 0.0004015377f};
        coefficients[2] = new float[31] { 0.7651271807f, -0.0258200603f, -0.0222581534f, -0.0171931937f, -0.0112935240f, -0.0052969602f, 0.0001065897f, 0.0043775939f, 0.0071965492f, 0.0084902234f, 0.0084130009f, 0.0072907458f, 0.0055413900f, 0.0035898109f, 0.0017939979f, 0.0003954147f, -0.0004999666f, -0.0009106580f, -0.0009456173f, -0.0007581398f, -0.0004997472f, -0.0002843835f, -0.0001693382f, -0.0001544319f, -0.0001964037f, -0.0002321975f, -0.0002035779f, -0.0000763005f, 0.0001505429f, 0.0004461816f, 0.0007589081f};
        coefficients[3] = new float[31] { 0.7651271807f, -0.0258200603f, -0.0222581534f, -0.0171931937f, -0.0112935240f, -0.0052969602f, 0.0001065897f, 0.0043775939f, 0.0071965492f, 0.0084902234f, 0.0084130009f, 0.0072907458f, 0.0055413900f, 0.0035898109f, 0.0017939979f, 0.0003954147f, -0.0004999666f, -0.0009106580f, -0.0009456173f, -0.0007581398f, -0.0004997472f, -0.0002843835f, -0.0001693382f, -0.0001544319f, -0.0001964037f, -0.0002321975f, -0.0002035779f, -0.0000763005f, 0.0001505429f, 0.0004461816f, 0.0007589081f};
        coefficients[4] = new float[31] { 0.7189101850f, 0.0045223276f, 0.0045292534f, 0.0045302606f, 0.0045239572f, 0.0045087615f, 0.0044831767f, 0.0044460442f, 0.0043967306f, 0.0043352186f, 0.0042620918f, 0.0041784258f, 0.0040856137f, 0.0039851679f, 0.0038785361f, 0.0037669662f, 0.0036514388f, 0.0035326700f, 0.0034111709f, 0.0032873415f, 0.0031615704f, 0.0030343152f, 0.0029061470f, 0.0027777521f, 0.0026498968f, 0.0025233685f, 0.0023989108f, 0.0022771684f, 0.0021586556f, 0.0020437501f, 0.0019327123f};
        coefficients[5] = new float[31] { 0.9726933054f, -0.0143335731f, -0.0135772464f, -0.0124761366f, -0.0111401712f, -0.0096953287f, -0.0082648993f, -0.0069524727f, -0.0058295990f, -0.0049300049f, -0.0042508519f, -0.0037601112f, -0.0034080024f, -0.0031398229f, -0.0029074899f, -0.0026776713f, -0.0024353410f, -0.0021827052f, -0.0019344504f, -0.0017109428f, -0.0015312510f, -0.0014076393f, -0.0013426140f, -0.0013288493f, -0.0013515854f, -0.0013925491f, -0.0014342068f, -0.0014632418f, -0.0014725001f, -0.0014611397f, -0.0014332207f};
        coefficients[6] = new float[21] { 0.8259849283f, -0.0095446892f, -0.0081284007f, -0.0060312282f, -0.0035380057f, -0.0009721815f, 0.0013565349f, 0.0031993286f, 0.0044018620f, 0.0049189782f, 0.0048092230f, 0.0000235302f, 0.0000315519f, 0.0000332175f, 0.0000305220f, 0.0000253602f, 0.0000192997f, 0.0000134601f, 0.0000084935f, 0.0000046484f, 0.0000018841f};
        coefficients[7] = new float[41] { 0.6637500488f, -0.0329878436f, -0.0281628961f, -0.0214846782f, -0.0138370741f, -0.0061750854f, 0.0006265921f, 0.0059023474f, 0.0092794677f, 0.0107045937f, 0.0104123930f, 0.0056929418f, 0.0042259198f, 0.0026415928f, 0.0012253070f, 0.0001605108f, -0.0004832931f, -0.0007378022f, -0.0007048708f, -0.0005167618f, -0.0002978779f, -0.0001363591f, -0.0000704345f, -0.0000902177f, -0.0001518238f, -0.0001981263f, -0.0001796537f, -0.0000700326f, 0.0001274096f, 0.0003824782f, 0.0006483852f, -0.0000193588f, -0.0000168415f, -0.0000133884f, -0.0000090856f, -0.0000043190f, 0.0000002477f, 0.0000038308f, 0.0000057511f, 0.0000056405f, 0.0000035610f};
        coefficients[8] = new float[41] { 0.6637500488f, -0.0329878436f, -0.0281628961f, -0.0214846782f, -0.0138370741f, -0.0061750854f, 0.0006265921f, 0.0059023474f, 0.0092794677f, 0.0107045937f, 0.0104123930f, 0.0056929418f, 0.0042259198f, 0.0026415928f, 0.0012253070f, 0.0001605108f, -0.0004832931f, -0.0007378022f, -0.0007048708f, -0.0005167618f, -0.0002978779f, -0.0001363591f, -0.0000704345f, -0.0000902177f, -0.0001518238f, -0.0001981263f, -0.0001796537f, -0.0000700326f, 0.0001274096f, 0.0003824782f, 0.0006483852f, -0.0000193588f, -0.0000168415f, -0.0000133884f, -0.0000090856f, -0.0000043190f, 0.0000002477f, 0.0000038308f, 0.0000057511f, 0.0000056405f, 0.0000035610f};
        coefficients[9] = new float[41] { 0.6236566710f, -0.0060261207f, -0.0047882647f, -0.0029413137f, -0.0007343189f, 0.0015491898f, 0.0036369310f, 0.0053091064f, 0.0064278293f, 0.0069501071f, 0.0069232357f, 0.0035010707f, 0.0034235725f, 0.0033398082f, 0.0032509596f, 0.0031580293f, 0.0030617922f, 0.0029628062f, 0.0028614692f, 0.0027581012f, 0.0026530275f, 0.0025466434f, 0.0024394462f, 0.0023320309f, 0.0022250563f, 0.0021191915f, 0.0020150607f, 0.0019131986f, 0.0018140257f, 0.0017178477f, 0.0016248734f, -0.0000485703f, -0.0000202789f, 0.0000031384f, 0.0000203905f, 0.0000309072f, 0.0000348807f, 0.0000331887f, 0.0000272177f, 0.0000186228f, 0.0000090689f};
        coefficients[10] = new float[41] {0.8438142641f, -0.0258958639f, -0.0232899976f, -0.0196011349f, -0.0152807559f, -0.0108307704f, -0.0067247222f, -0.0033383779f, -0.0009018486f, 0.0005194139f, 0.0010134894f, -0.0032247518f, -0.0029365856f, -0.0027098846f, -0.0025063284f, -0.0023007354f, -0.0020834525f, -0.0018588952f, -0.0016411458f, -0.0014480473f, -0.0012953774f, -0.0011924555f, -0.0011400144f, -0.0011305194f, -0.0011505055f, -0.0011840694f, -0.0012164897f, -0.0012370554f, -0.0012405082f, -0.0012269397f, -0.0012004006f, 0.0000436823f, 0.0000237399f, 0.0000058851f, -0.0000083159f, -0.0000178921f, -0.0000225697f, -0.0000227419f, -0.0000193273f, -0.0000135545f, -0.0000067251f};
        coefficients[11] = new float[41] {0.7285088256f, -0.0213806659f, -0.0183091429f, -0.0139020337f, -0.0087481130f, -0.0035008109f, 0.0012261816f, 0.0049505810f, 0.0073843970f, 0.0084584057f, 0.0083066520f, 0.0069854708f, 0.0053649127f, 0.0035307727f, 0.0018261442f, 0.0004851457f, -0.0003861275f, -0.0008001106f, -0.0008561694f, -0.0006972061f, -0.0004659184f, -0.0002705602f, -0.0001664063f, -0.0001545073f, -0.0001949416f, -0.0002286566f, -0.0002007452f, -0.0000787056f, 0.0001385256f, 0.0004219528f, 0.0007225568f, 0.0000037156f, 0.0000037819f, 0.0000035259f, 0.0000030667f, 0.0000025132f, 0.0000019516f, 0.0000014383f, 0.0000009979f, 0.0000006274f, 0.0000003047f};
        coefficients[12] = new float[41] {0.7285088256f, -0.0213806659f, -0.0183091429f, -0.0139020337f, -0.0087481130f, -0.0035008109f, 0.0012261816f, 0.0049505810f, 0.0073843970f, 0.0084584057f, 0.0083066520f, 0.0069854708f, 0.0053649127f, 0.0035307727f, 0.0018261442f, 0.0004851457f, -0.0003861275f, -0.0008001106f, -0.0008561694f, -0.0006972061f, -0.0004659184f, -0.0002705602f, -0.0001664063f, -0.0001545073f, -0.0001949416f, -0.0002286566f, -0.0002007452f, -0.0000787056f, 0.0001385256f, 0.0004219528f, 0.0007225568f, 0.0000037156f, 0.0000037819f, 0.0000035259f, 0.0000030667f, 0.0000025132f, 0.0000019516f, 0.0000014383f, 0.0000009979f, 0.0000006274f, 0.0000003047f};
        coefficients[13] = new float[41] {0.6845037372f, 0.0073160449f, 0.0071425659f, 0.0068517384f, 0.0064775076f, 0.0060600109f, 0.0056393122f, 0.0052495618f, 0.0049146182f, 0.0046458267f, 0.0044421838f, 0.0040747494f, 0.0039852279f, 0.0038882044f, 0.0037850691f, 0.0036770282f, 0.0035650375f, 0.0034498022f, 0.0033318322f, 0.0032115297f, 0.0030892833f, 0.0029655448f, 0.0028408723f, 0.0027159320f, 0.0025914666f, 0.0024682391f, 0.0023469712f, 0.0022282914f, 0.0021127040f, 0.0020005828f, 0.0018921889f, 0.0000493605f, 0.0000391678f, 0.0000299851f, 0.0000220529f, 0.0000155041f, 0.0000103544f, 0.0000065099f, 0.0000037903f, 0.0000019623f, 0.0000007761f};
        coefficients[14] = new float[41] {0.9261410069f, -0.0095748115f, -0.0091839592f, -0.0086071847f, -0.0078970195f, -0.0071143435f, -0.0063196034f, -0.0055647609f, -0.0048873525f, -0.0043075551f, -0.0038285106f, -0.0037343074f, -0.0033782071f, -0.0031050672f, -0.0028691335f, -0.0026383485f, -0.0023978777f, -0.0021492349f, -0.0019058817f, -0.0016868362f, -0.0015100597f, -0.0013871979f, -0.0013207172f, -0.0013037665f, -0.0013223955f, -0.0013592405f, -0.0013975526f, -0.0014245153f, -0.0014331233f, -0.0014223636f, -0.0013959103f, -0.0000313403f, -0.0000254006f, -0.0000198381f, -0.0000148664f, -0.0000106369f, -0.0000072223f, -0.0000046128f, -0.0000027271f, -0.0000014333f, -0.0000005755f};
        coefficients[15] = new float[61] {0.5854196026f, -0.0395112598f, -0.0333939609f, -0.0251605459f, -0.0158986803f, -0.0067571201f, 0.0012349969f, 0.0073174724f, 0.0110914334f, 0.0125416739f, 0.0119903519f, 0.0099968243f, 0.0072278640f, 0.0043262405f, 0.0018032381f, -0.0000268967f, -0.0010632820f, -0.0013893876f, -0.0012117138f, -0.0007844464f, -0.0003389281f, -0.0000330115f, 0.0000714053f, 0.0000021974f, -0.0001513547f, -0.0002782036f, -0.0002843396f, -0.0001206296f, 0.0002061625f, 0.0006398166f, 0.0010944823f, -0.0000981426f, -0.0000810847f, -0.0000606094f, -0.0000394700f, -0.0000198151f, -0.0000032151f, 0.0000093272f, 0.0000173769f, 0.0000210519f, 0.0000209608f, 0.0000180800f, 0.0000135762f, 0.0000086033f, 0.0000041142f, 0.0000007289f, -0.0000013146f, -0.0000021230f, -0.0000020396f, -0.0000015024f, -0.0000009058f, -0.0000005047f, -0.0000003771f, -0.0000004485f, -0.0000005608f, -0.0000005571f, -0.0000003544f, 0.0000000185f, 0.0000004276f, 0.0000006772f, 0.0000005759f};
        coefficients[16] = new float[61] {0.5500577230f, -0.0151021485f, -0.0126529251f, -0.0091117408f, -0.0049531644f, -0.0007048521f, 0.0031367219f, 0.0061803204f, 0.0081908179f, 0.0091091092f, 0.0090397847f, 0.0082117122f, 0.0069215919f, 0.0054730400f, 0.0041234204f, 0.0030477792f, 0.0023246560f, 0.0019434055f, 0.0018281639f, 0.0018706624f, 0.0019632475f, 0.0020246801f, 0.0020140392f, 0.0019315517f, 0.0018084707f, 0.0016904786f, 0.0016200287f, 0.0016225029f, 0.0016993664f, 0.0018292103f, 0.0019753504f, -0.0000416138f, 0.0000091873f, 0.0000505268f, 0.0000801494f, 0.0000971656f, 0.0001021000f, 0.0000967214f, 0.0000836952f, 0.0000661272f, 0.0000470858f, 0.0000291849f, 0.0000142939f, 0.0000034097f, -0.0000033084f, -0.0000063690f, -0.0000066982f, -0.0000053674f, -0.0000033565f, -0.0000013925f, 0.0000001179f, 0.0000010684f, 0.0000015673f, 0.0000018225f, 0.0000020307f, 0.0000022986f, 0.0000026122f, 0.0000028515f, 0.0000028411f, 0.0000024134f, 0.0000014668f};
        coefficients[17] = new float[61] {0.7442340864f, -0.0360820061f, -0.0316685834f, -0.0255999314f, -0.0186380040f, -0.0116098289f, -0.0052779624f, -0.0002294442f, 0.0031975226f, 0.0049382582f, 0.0051768998f, 0.0042812646f, 0.0027134994f, 0.0009360964f, -0.0006681191f, -0.0018482337f, -0.0025031963f, -0.0026668892f, -0.0024685132f, -0.0020807038f, -0.0016687506f, -0.0013521219f, -0.0011850251f, -0.0011572763f, -0.0012117148f, -0.0012709342f, -0.0012648703f, -0.0011518228f, -0.0009282577f, -0.0006263288f, -0.0003014635f, 0.0000492861f, 0.0000142997f, -0.0000167417f, -0.0000412931f, -0.0000577686f, -0.0000657177f, -0.0000657944f, -0.0000595439f, -0.0000490601f, -0.0000365926f, -0.0000241809f, -0.0000133801f, -0.0000051165f, 0.0000003203f, 0.0000031690f, 0.0000040153f, 0.0000035859f, 0.0000025657f, 0.0000014715f, 0.0000005964f, 0.0000000221f, -0.0000003198f, -0.0000005636f, -0.0000008308f, -0.0000011744f, -0.0000015597f, -0.0000018781f, -0.0000019852f, -0.0000017483f, -0.0000010877f};
        coefficients[18] = new float[41] {0.7285088256f, -0.0213806659f, -0.0183091429f, -0.0139020337f, -0.0087481130f, -0.0035008109f, 0.0012261816f, 0.0049505810f, 0.0073843970f, 0.0084584057f, 0.0083066520f, 0.0069854708f, 0.0053649127f, 0.0035307727f, 0.0018261442f, 0.0004851457f, -0.0003861275f, -0.0008001106f, -0.0008561694f, -0.0006972061f, -0.0004659184f, -0.0002705602f, -0.0001664063f, -0.0001545073f, -0.0001949416f, -0.0002286566f, -0.0002007452f, -0.0000787056f, 0.0001385256f, 0.0004219528f, 0.0007225568f, 0.0000037156f, 0.0000037819f, 0.0000035259f, 0.0000030667f, 0.0000025132f, 0.0000019516f, 0.0000014383f, 0.0000009979f, 0.0000006274f, 0.0000003047f};
        coefficients[19] = new float[61] {0.5500577230f, -0.0151021485f, -0.0126529251f, -0.0091117408f, -0.0049531644f, -0.0007048521f, 0.0031367219f, 0.0061803204f, 0.0081908179f, 0.0091091092f, 0.0090397847f, 0.0082117122f, 0.0069215919f, 0.0054730400f, 0.0041234204f, 0.0030477792f, 0.0023246560f, 0.0019434055f, 0.0018281639f, 0.0018706624f, 0.0019632475f, 0.0020246801f, 0.0020140392f, 0.0019315517f, 0.0018084707f, 0.0016904786f, 0.0016200287f, 0.0016225029f, 0.0016993664f, 0.0018292103f, 0.0019753504f, -0.0000416138f, 0.0000091873f, 0.0000505268f, 0.0000801494f, 0.0000971656f, 0.0001021000f, 0.0000967214f, 0.0000836952f, 0.0000661272f, 0.0000470858f, 0.0000291849f, 0.0000142939f, 0.0000034097f, -0.0000033084f, -0.0000063690f, -0.0000066982f, -0.0000053674f, -0.0000033565f, -0.0000013925f, 0.0000001179f, 0.0000010684f, 0.0000015673f, 0.0000018225f, 0.0000020307f, 0.0000022986f, 0.0000026122f, 0.0000028515f, 0.0000028411f, 0.0000024134f, 0.0000014668f};
        coefficients[20] = new float[61] {0.7442340864f, -0.0360820061f, -0.0316685834f, -0.0255999314f, -0.0186380040f, -0.0116098289f, -0.0052779624f, -0.0002294442f, 0.0031975226f, 0.0049382582f, 0.0051768998f, 0.0042812646f, 0.0027134994f, 0.0009360964f, -0.0006681191f, -0.0018482337f, -0.0025031963f, -0.0026668892f, -0.0024685132f, -0.0020807038f, -0.0016687506f, -0.0013521219f, -0.0011850251f, -0.0011572763f, -0.0012117148f, -0.0012709342f, -0.0012648703f, -0.0011518228f, -0.0009282577f, -0.0006263288f, -0.0003014635f, 0.0000492861f, 0.0000142997f, -0.0000167417f, -0.0000412931f, -0.0000577686f, -0.0000657177f, -0.0000657944f, -0.0000595439f, -0.0000490601f, -0.0000365926f, -0.0000241809f, -0.0000133801f, -0.0000051165f, 0.0000003203f, 0.0000031690f, 0.0000040153f, 0.0000035859f, 0.0000025657f, 0.0000014715f, 0.0000005964f, 0.0000000221f, -0.0000003198f, -0.0000005636f, -0.0000008308f, -0.0000011744f, -0.0000015597f, -0.0000018781f, -0.0000019852f, -0.0000017483f, -0.0000010877f};
        coefficients[21] = new float[61] {0.5500577230f, -0.0151021485f, -0.0126529251f, -0.0091117408f, -0.0049531644f, -0.0007048521f, 0.0031367219f, 0.0061803204f, 0.0081908179f, 0.0091091092f, 0.0090397847f, 0.0082117122f, 0.0069215919f, 0.0054730400f, 0.0041234204f, 0.0030477792f, 0.0023246560f, 0.0019434055f, 0.0018281639f, 0.0018706624f, 0.0019632475f, 0.0020246801f, 0.0020140392f, 0.0019315517f, 0.0018084707f, 0.0016904786f, 0.0016200287f, 0.0016225029f, 0.0016993664f, 0.0018292103f, 0.0019753504f, -0.0000416138f, 0.0000091873f, 0.0000505268f, 0.0000801494f, 0.0000971656f, 0.0001021000f, 0.0000967214f, 0.0000836952f, 0.0000661272f, 0.0000470858f, 0.0000291849f, 0.0000142939f, 0.0000034097f, -0.0000033084f, -0.0000063690f, -0.0000066982f, -0.0000053674f, -0.0000033565f, -0.0000013925f, 0.0000001179f, 0.0000010684f, 0.0000015673f, 0.0000018225f, 0.0000020307f, 0.0000022986f, 0.0000026122f, 0.0000028515f, 0.0000028411f, 0.0000024134f, 0.0000014668f};
        coefficients[22] = new float[61] {0.6992791241f, -0.0059057139f, -0.0054200674f, -0.0046889886f, -0.0037912104f, -0.0028176684f, -0.0018578361f, -0.0009872411f, -0.0002583317f, 0.0003039040f, 0.0007011807f, 0.0009566637f, 0.0011067046f, 0.0011915026f, 0.0012466537f, 0.0012971488f, 0.0013546925f, 0.0014184015f, 0.0014782081f, 0.0015197868f, 0.0015296447f, 0.0014991635f, 0.0014267952f, 0.0013181593f, 0.0011843268f, 0.0010389767f, 0.0008952919f, 0.0007634036f, 0.0006489450f, 0.0005529129f, 0.0004726735f, -0.0003690652f, -0.0003286041f, -0.0002910615f, -0.0002569741f, -0.0002266421f, -0.0002001133f, -0.0001772032f, -0.0001575443f, -0.0001406552f, -0.0001260158f, -0.0001131363f, -0.0001016089f, -0.0000911355f, -0.0000815309f, -0.0000727048f, -0.0000646298f, -0.0000573056f, -0.0000507256f, -0.0000448559f, -0.0000396259f, -0.0000349333f, -0.0000306580f, -0.0000266814f, -0.0000229035f, -0.0000192560f, -0.0000157065f, -0.0000122552f, -0.0000089260f, -0.0000057531f, -0.0000027700f};
        coefficients[23] = new float[41] {0.8438142641f, -0.0258958639f, -0.0232899976f, -0.0196011349f, -0.0152807559f, -0.0108307704f, -0.0067247222f, -0.0033383779f, -0.0009018486f, 0.0005194139f, 0.0010134894f, -0.0032247518f, -0.0029365856f, -0.0027098846f, -0.0025063284f, -0.0023007354f, -0.0020834525f, -0.0018588952f, -0.0016411458f, -0.0014480473f, -0.0012953774f, -0.0011924555f, -0.0011400144f, -0.0011305194f, -0.0011505055f, -0.0011840694f, -0.0012164897f, -0.0012370554f, -0.0012405082f, -0.0012269397f, -0.0012004006f, 0.0000436823f, 0.0000237399f, 0.0000058851f, -0.0000083159f, -0.0000178921f, -0.0000225697f, -0.0000227419f, -0.0000193273f, -0.0000135545f, -0.0000067251f};

        filterL = new ReflectionFilter_revamp(coefficients[Int32.Parse(name)]);
        filterR = new ReflectionFilter_revamp(coefficients[Int32.Parse(name)]);
        filterL.Reset();
        filterR.Reset();      
    }

    // Update is called once per frame
    void Update()
    {

    }

    void OnAudioFilterRead(float[] data, int channels)
    {
        for(int i = 0; i < data.Length; i+=2)
        {
            data[i]     = filterL.ProcessSample(data[i]);
            data[i+1]   = filterR.ProcessSample(data[i+1]);
        }
    }
}
